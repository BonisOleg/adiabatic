{% extends 'base.html' %}
{% load i18n %}

{% block title %}{{ product.get_name }}{% endblock %}
{% block og_title %}{{ product.get_name }}{% endblock %}
{% block og_description %}{{ product.get_short_description|default:"–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—Ä–æ–¥—É–∫—Ç"|truncatewords:20
}}{% endblock %}

{% block content %}
<!-- Hero Section (ABIABATIC Style) -->
<section class="hero">
    <div class="hero__container">
        <div class="hero__content js-observe">
            <p class="hero__subtitle slide-in-left">
                {{ product.category.get_name }}
            </p>
            <h1 class="hero__title fade-in">
                {{ product.get_name }}
            </h1>
            {% if product.get_short_description %}
            <p class="hero__description slide-in-up">
                {{ product.get_short_description }}
            </p>
            {% endif %}
            <div class="hero__actions">
                <a href="{% url 'leads:submit' %}" class="btn btn--primary btn--large">–ó–∞–º–æ–≤–∏—Ç–∏</a>
                <a href="{% url 'catalog:category_detail' product.category.slug %}"
                    class="btn btn--secondary btn--large">–î–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó</a>
            </div>
        </div>
        <div class="hero__image-container js-observe">
            {% if product.hero_image %}
            <img src="{{ product.hero_image.url }}" alt="{{ product.get_name }}" class="hero__image">
            {% else %}
            <div class="adiabatic-placeholder">
                ‚öôÔ∏è {{ product.get_name }}
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Product Details Section -->
<section class="catalog-section">
    <div class="container">
        <div class="about-container">
            <!-- Product Description -->
            <div class="about-content js-observe">
                {% if product.get_description %}
                <h2 class="about-title">
                    –û–ø–∏—Å
                    <span class="about-title-accent">–ø—Ä–æ–¥—É–∫—Ç—É</span>
                </h2>
                <div class="about-description">
                    {{ product.get_description|safe }}
                </div>
                {% endif %}

                {% if product.price_usd %}
                <div class="price-highlight">
                    <div class="price-highlight__label">
                        –¶—ñ–Ω–∞
                    </div>
                    <div class="price-highlight__value">
                        ${{ product.price_usd }}
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Technical Specifications -->
            {% if product.specifications.all %}
            <div class="about-features js-observe">
                <h3 class="about-features__title">
                    –¢–µ—Ö–Ω—ñ—á–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
                </h3>
                <div class="tech-specs">
                    {% for spec in product.specifications.all %}
                    <div class="tech-specs__row">
                        <div class="tech-specs__label">{{ spec.get_name }}</div>
                        <div class="tech-specs__value">{{ spec.value }}{% if spec.unit %} {{ spec.unit }}{% endif %}
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<!-- Advantages Section -->
{% if product.advantages.all %}
<section class="catalog-section">
    <div class="container">
        <div class="catalog-header js-observe">
            <p class="catalog-subtitle">–ü–µ—Ä–µ–≤–∞–≥–∏ –ø—Ä–æ–¥—É–∫—Ç—É</p>
            <h2 class="catalog-title">
                –ß–æ–º—É –æ–±–∏—Ä–∞—é—Ç—å
                <span class="catalog-title-accent">{{ product.get_name }}</span>
            </h2>
            <div class="catalog-underline"></div>
        </div>

        <div class="equipment-grid">
            {% for advantage in product.advantages.all %}
            <div class="equipment-card js-observe">
                <div class="equipment-card__image">
                    {% if advantage.icon %}
                    <i class="{{ advantage.icon }}"></i>
                    {% else %}
                    ‚úì
                    {% endif %}
                </div>
                <div class="equipment-card__content">
                    <div class="equipment-card__title">
                        {{ advantage.get_title }}
                    </div>
                    {% if advantage.get_description %}
                    <p class="equipment-card__description">
                        {{ advantage.get_description }}
                    </p>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Gallery Section -->
{% if product.gallery.all %}
<section class="catalog-section">
    <div class="container">
        <div class="catalog-header js-observe">
            <p class="catalog-subtitle">–ì–∞–ª–µ—Ä–µ—è –∑–æ–±—Ä–∞–∂–µ–Ω—å</p>
            <h2 class="catalog-title">
                {{ product.get_name }}
            </h2>
            <div class="catalog-underline"></div>
        </div>

        <div class="equipment-grid">
            {% for image in product.gallery.all %}
            <div class="equipment-card js-observe">
                <img src="{{ image.image.url }}" alt="{{ image.alt_text|default:product.get_name }}"
                    class="equipment-card__image">
                {% if image.alt_text %}
                <div class="equipment-card__content">
                    <p class="equipment-card__description">
                        {{ image.alt_text }}
                    </p>
                </div>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Documents Section -->
{% if product.documents.all %}
<section class="catalog-section">
    <div class="container">
        <div class="catalog-header js-observe">
            <p class="catalog-subtitle">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è</p>
            <h2 class="catalog-title">
                –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ —Ç–∞
                <span class="catalog-title-accent">–¥–æ–∫—É–º–µ–Ω—Ç–∏</span>
            </h2>
            <div class="catalog-underline"></div>
        </div>

        <div class="equipment-grid">
            {% for document in product.documents.all %}
            <div class="equipment-card js-observe">
                <div class="equipment-card__image">
                    üìÑ
                </div>
                <div class="equipment-card__content">
                    <div class="equipment-card__title">
                        {{ document.get_title }}
                    </div>
                    <div class="equipment-card__meta">
                        <a href="{{ document.file.url }}" target="_blank" class="btn btn--outline btn--small">
                            {% trans "–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏" %}
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- Related Products -->
{% if related_products %}
<section class="catalog-section">
    <div class="container">
        <div class="catalog-header js-observe">
            <p class="catalog-subtitle">–°—Ö–æ–∂—ñ –ø—Ä–æ–¥—É–∫—Ç–∏</p>
            <h2 class="catalog-title">
                –í–∞—Å —Ç–∞–∫–æ–∂ –º–æ–∂–µ
                <span class="catalog-title-accent">–∑–∞—Ü—ñ–∫–∞–≤–∏—Ç–∏</span>
            </h2>
            <div class="catalog-underline"></div>
        </div>

        <div class="equipment-grid">
            {% for related_product in related_products %}
            <div class="equipment-card js-observe">
                {% if related_product.hero_image %}
                <img src="{{ related_product.hero_image.url }}" alt="{{ related_product.get_name }}"
                    class="equipment-card__image">
                {% else %}
                <div class="equipment-card__image">
                    ‚öôÔ∏è
                </div>
                {% endif %}

                <div class="equipment-card__content">
                    <a href="{{ related_product.get_absolute_url }}" class="equipment-card__title">
                        {{ related_product.get_name }}
                    </a>

                    {% if related_product.get_short_description %}
                    <p class="equipment-card__description">
                        {{ related_product.get_short_description|truncatewords:10 }}
                    </p>
                    {% endif %}

                    <div class="equipment-card__meta">
                        {% if related_product.price_usd %}
                        <span class="equipment-card__price">
                            ${{ related_product.price_usd }}
                        </span>
                        {% endif %}
                        <a href="{{ related_product.get_absolute_url }}" class="btn btn--outline btn--small">
                            {% trans "–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ" %}
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section class="cta-section">
    <div class="cta-container">
        <div class="cta-content js-observe">
            <p class="cta-question">–ó–∞—Ü—ñ–∫–∞–≤–∏–ª–∏—Å—å –ø—Ä–æ–¥—É–∫—Ç–æ–º?</p>
            <h2 class="cta-title">
                –ó–∞–º–æ–≤—Ç–µ {{ product.get_name }}
                <span class="cta-title-accent">–ø—Ä—è–º–æ –∑–∞—Ä–∞–∑!</span>
            </h2>
            <p class="cta-description">
                –ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É —ñ –Ω–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä –∑–≤'—è–∂–µ—Ç—å—Å—è –∑ –≤–∞–º–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–Ω—è –¥–µ—Ç–∞–ª–µ–π –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –≤–∞—Ä—Ç–æ—Å—Ç—ñ
            </p>
            <a href="{% url 'leads:submit' %}" class="btn btn--primary btn--large">
                –ó–∞–º–æ–≤–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç
            </a>
        </div>
        <div class="js-observe">
            <div class="adiabatic-placeholder">
                üõí –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è
            </div>
        </div>
    </div>
</section>
{% endblock %}