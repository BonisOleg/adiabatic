{% extends 'base.html' %}
{% load i18n %}

{% block title %}{{ category.get_name }}{% endblock %}
{% block og_title %}{{ category.get_name }}{% endblock %}
{% block og_description %}{{ meta_description|default:"–ü—Ä–æ–¥—É–∫—Ü—ñ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó"|truncatewords:20 }}{% endblock %}

{% block content %}
<!-- Hero Section (Promsteel Style) -->
<section class="hero">
    <div class="hero__container">
        <div class="hero__content js-observe">
            <p class="hero__subtitle slide-in-left">
                –ö–∞—Ç–µ–≥–æ—Ä—ñ—è –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è
            </p>
            <h1 class="hero__title fade-in">
                {{ category.get_name }}
            </h1>
            {% if category.get_description %}
            <p class="hero__description slide-in-up">
                {{ category.get_description }}
            </p>
            {% endif %}
            <div class="hero__actions">
                <a href="{% url 'catalog:catalog_list' %}" class="btn btn--secondary btn--large">–ù–∞–∑–∞–¥ –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É</a>
                <a href="{% url 'leads:submit' %}" class="btn btn--primary btn--large">–ó–∞–º–æ–≤–∏—Ç–∏</a>
            </div>
        </div>
        <div class="hero__image-container js-observe">
            <div class="promsteel-placeholder">
                {% if category.icon %}
                <i class="{{ category.icon }}"></i>
                {% endif %}
                {{ category.get_name }}
            </div>
        </div>
    </div>
</section>

<!-- Products Grid (Promsteel Style) -->
{% if products %}
<section class="catalog-section">
    <div class="container">
        <div class="catalog-header js-observe">
            <p class="catalog-subtitle">–ü—Ä–æ–¥—É–∫—Ü—ñ—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó</p>
            <h2 class="catalog-title">
                {{ category.get_name }}
            </h2>
            <div class="catalog-underline"></div>
        </div>

        <div class="equipment-grid">
            {% for product in products %}
            <div class="equipment-card js-observe">
                {% if product.hero_image %}
                <img src="{{ product.hero_image.url }}" alt="{{ product.get_name }}" class="equipment-card__image">
                {% else %}
                <div class="equipment-card__image">
                    ‚öôÔ∏è
                </div>
                {% endif %}

                <div class="equipment-card__content">
                    <a href="{{ product.get_absolute_url }}" class="equipment-card__title">
                        {{ product.get_name }}
                    </a>

                    {% if product.get_short_description %}
                    <p class="equipment-card__description">
                        {{ product.get_short_description|truncatewords:15 }}
                    </p>
                    {% endif %}

                    <!-- –û—Å–Ω–æ–≤–Ω—ñ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
                    {% if product.specifications.all %}
                    <div class="tech-specs">
                        {% for spec in product.specifications.all|slice:":3" %}
                        <div class="tech-specs__row">
                            <div class="tech-specs__label">{{ spec.get_name }}:</div>
                            <div class="tech-specs__value">{{ spec.value }}{% if spec.unit %} {{ spec.unit }}{% endif %}
                            </div>
                        </div>
                        {% endfor %}
                        {% if product.specifications.count > 3 %}
                        <div class="tech-specs__more">
                            +{{ product.specifications.count|add:"-3" }} {% trans "—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫" %}
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}

                    <div class="equipment-card__meta">
                        {% if product.price_usd %}
                        <span class="equipment-card__price">
                            ${{ product.price_usd }}
                        </span>
                        {% endif %}
                        <a href="{{ product.get_absolute_url }}" class="btn btn--outline btn--small">
                            {% trans "–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ" %}
                        </a>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        {% if products.has_other_pages %}
        <div class="pagination-wrapper">
            {% if products.has_previous %}
            <a href="?page={{ products.previous_page_number }}" class="btn btn--outline btn--small">
                {% trans "–ü–æ–ø–µ—Ä–µ–¥–Ω—è" %}
            </a>
            {% endif %}

            <span class="pagination-info">
                {% blocktrans with page=products.number total=products.paginator.num_pages %}
                –°—Ç–æ—Ä—ñ–Ω–∫–∞ {{ page }} –∑ {{ total }}
                {% endblocktrans %}
            </span>

            {% if products.has_next %}
            <a href="?page={{ products.next_page_number }}" class="btn btn--outline btn--small">
                {% trans "–ù–∞—Å—Ç—É–ø–Ω–∞" %}
            </a>
            {% endif %}
        </div>
        {% endif %}
    </div>
</section>
{% else %}
<!-- No Products Section -->
<section class="catalog-section">
    <div class="container">
        <div class="text-center no-products">
            <div class="no-products__icon">üì¶</div>
            <h2 class="no-products__title">
                {% trans "–ü—Ä–æ–¥—É–∫—Ü—ñ—é –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ" %}
            </h2>
            <p class="no-products__description">
                {% trans "–£ —Ü—ñ–π –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø–æ–∫–∏ –Ω–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –ø—Ä–æ–¥—É–∫—Ç—ñ–≤" %}
            </p>
            <a href="{% url 'catalog:catalog_list' %}" class="btn btn--primary">
                {% trans "–ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –¥–æ –∫–∞—Ç–∞–ª–æ–≥—É" %}
            </a>
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section -->
<section class="cta-section">
    <div class="cta-container">
        <div class="cta-content js-observe">
            <p class="cta-question">–ü–æ—Ç—Ä—ñ–±–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è?</p>
            <h2 class="cta-title">
                –ù–∞—à—ñ —Ñ–∞—Ö—ñ–≤—Ü—ñ –≥–æ—Ç–æ–≤—ñ
                <span class="cta-title-accent">–¥–æ–ø–æ–º–æ–≥—Ç–∏ –∑ –≤–∏–±–æ—Ä–æ–º!</span>
            </h2>
            <p class="cta-description">
                –ó–≤'—è–∂—ñ—Ç—å—Å—è –∑ –Ω–∞–º–∏ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–æ—ó –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó —Ç–∞ –ø—ñ–¥–±–æ—Ä—É –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è –¥–ª—è –≤–∞—à–∏—Ö –ø–æ—Ç—Ä–µ–±
            </p>
            <a href="{% url 'leads:submit' %}" class="btn btn--primary btn--large">
                –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—é
            </a>
        </div>
        <div class="js-observe">
            <div class="promsteel-placeholder">
                üë®‚Äçüíº –ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è
            </div>
        </div>
    </div>
</section>
{% endblock %}